# Final-PJT(KINOTIC) 👍



## Infomation 🎶

시행 날짜 : 2022.05.20 (금) ~ 2022.05.27(금)

개발 환경 : vscode

개발 언어 : Python, Django, VUE, Node

페어프로그래밍 팀원 : 김민성, 김연준

라이브러리 : json

목표 : 
⚫ 영화 데이터 기반 추천 서비스 구성
⚫ 영화 추천 알고리즘 구성
⚫ 커뮤니티 서비스 구성
⚫ HTML, CSS, JavaScript, Vue.js, Django, REST API, Database 등을 활용한 실제 서비스 설계
⚫ 서비스 관리 및 유지보수



## 1. 팀원 정보 및 업무 분담 내역

- 팀장 김민성
  - Back-End 전반적인 업무를 담당(Django 작업)
  - ERD 작성
  - 영화 추천 알고리즘
  - API를 이용하여 DB에 Movie 정보를 수집
  - 각종 기능에 해당하는 코드 작성



- 팀원 김연준

  - 프로젝트 전반적인 테마 기획
  - flow-map 작성

  - Front-End 전반적인 업무를 담당(Vue 작업)
  - Django에서 보낸 데이터를 Vue에서 web과 연결
  - 데이터를 기반으로 Vue에서 web 구현 및 로직 작성
  - web 스타일링



## 2. 목표 서비스 구현 및 실제 구현 정도

- 목표 서비스의 85%정도 구현하였다.
- 구현하지 못한 서비스는 소셜로그인과 장르를 기반으로 정렬해주는 시스템이다.



## 3. 데이터베이스 모델링(ERD)

![LastPjtErd.drawio (2)](README.assets/LastPjtErd.drawio (2).png)

- Model들 사이에 1:N 연결과 M:N연결 부분들은 선을 이용하여 표시하였습니다.
- 시작과 끝이 명확하지 않은 부분들은 색을 이용하여 표시하였습니다.





## 4. 필수 기능에 대한 설명

### A. 관리자뷰

- admin.site.register() 함수를 이용하여 localhost:8000/admin/ 사이트에 관리자 권한으로 영화 등록/수정/삭제 권한과 유저 관리 권한을 부여하였음.
- 메인 페이지에서 관리자의 권한이 있는 몇 개의 아이디에만 admin으로 갈 수 있는 버튼이 보이게 설정해주었다.
- 이 버튼을 누르면 admin 페이지로 이동하며 admin페이지에서는 재로그인 해주어야 된다.



### B. 영화 정보

- 영화데이터를 DB에 1000개이상의 데이터를 넣었습니다.
- 로그인 된 유저는 영화의 상세정보페이지를 통해 들어가서 댓글 형식으로 리뷰를 남길 수 있고, 평점을 0~10점까지 부여할 수 있습니다.
- 리뷰는 작성한 본인만 수정, 삭제 할 수 있도록 만들었습니다.



### C. 영화 추천 알고리즘

- 영화 추천 알고리즘은 크게 4가지를 구성하였습니다.

  1.  **날씨 기반 영화 추천 알고리즘**

  - api를 이용하여openweather사이트의 현재 날씨 데이터를 수집하였습니다.
  - 수집한 날씨들을 토대로 dictionary로 날씨와 장르를 짝지어준 후 그 날씨에 해당하는 장르에서 랜덤으로 20개의 영화를 추천하였습니다.

  

  2.  **유저의 찜한 영화 목록 기반 영화 추천 알고리즘**

  - 유저는 이미 본 영화의 목록과 찜한 영화 목록을 갖고 있습니다.

  - 유저의 찜한 영화 목록에 있는 모든 영화의 장르들을 리스트로 수집한다. 

    (같은 장르는 더 많이 리스트에 수집이 된다.)

  - 리스트에서 랜덤으로 1개의 장르를 뽑고, 그 장르에 해당하는 영화를 랜덤으로 1개 뽑아서 추천 영화 리스트에 추가시켜준다.

  - 찜한 영화 목록이 비어있다면, 기본 영화 추천 알고리즘을 통하여 영화를 추천하여 준다.

  - 추천 영화 리스트에는 같은 영화가 들어갈 수 없고, 유저가 이미 본 영화도 추천해주지 않는다.

  

  3.  **유저의 팔로잉한 유저 기반 영화 추천 알고리즘**

  - 유저가 팔로잉한 유저의 찜 목록에 들어가서 그 찜 목록에 있는 영화를 추천 리스트에 포함한다.
  - 모든 팔로잉 유저의 찜 목록을 돌고서 영화 추천 리스트가 20개 이상이 되지 않는다면, 팔로잉한 유저의 이미 본 영화 목록으로 들어가서 영화를 추가시킨다.
  - 그래도 영화 추천 리스트가 20개 이상이 되지 않는다면 기본 영화 추천 알고리즘을 통하여 나머지 영화를 추가시켜준다.
  - 팔로잉한 유저가 없다면 기본 영화 추천 알고리즘을 통하여 영화를 추천하여준다.
  - 추천 영화 리스트에는 같은 영화가 들어갈 수 없고, 유저가 이미 본 영화도 추천해주지 않는다.

  

  4.  **기본 영화 추천 알고리즘**

  - IMDB의 top랭킹을 정하는 시스템인 weighted rating(**wr**) 공식을 이용하여 값을 구한 후 **wr**이 높은 순으로 정렬 후 100개를 끊어내어 그 중에 랜덤으로 20개를 선정하여 추천하였다.

  - ```python
    # Weighted Rating (WR) =  (v/(v+m)*R)+(m/(v+m)*C)
    # v : 영화에 대한 평가 수
    # m : 차트에 표시되어야 하는 최소 평가 수(상위 5%를 기준으로 선정)
    # R : 영화의 평점
    # C : 전체 영화에 대한 평균 점수
    ```





### D. 커뮤니티

- 커뮤니티에는 영화 정보와 관련된 소통을 할 수 있는 자유게시판을 만들었다.
- 각 사용자는 글을 조회, 생성할 수 있으며, 작성자 본인만 글을 수정, 삭제 할 수 있다.
- 모든 사용자는 댓글을 작성할 수 있으며, 작성자 보인만 댓글을 수정, 삭제 할 수 있다.
- 각 게시글 및 댓글은 생성, 수정시간을 나타내 준다.





### E. 기타

- 페이지만 16개 존재한다.
- URL로 따지면 20개 이상의 URL이 사용되었다.





## 5. 추가 기능

### A. 검색 기능

- DB에 있는 영화 검색 기능을 구현해냈다.
- 영화를 한글로 검색을 하든지, 영어로 검색을 하든지 모두 찾아낼 수 있다. (일어, 중국어 모두 가능)
- title 과 original_title 값을 모두 영화 DB에 넣고 filter를 이용하여 검색 후 합쳐서 결과창을 만들었다.



### B. 유저 팔로우 팔로잉 기능

- 다른 유저의 프로필에 들어가서 팔로우를 할 수 있다. 
- 팔로우를 할 시 내 팔로잉 리스트에 상대 유저의 정보가 들어가고, 상대 팔로우 리스트에는 나의 정보가 들어간다.
- 이를 이용하여 영화 추천 알고리즘도 작성하였다.



### C. 각종 좋아요 기능

- 게시물, 리뷰에 좋아요 기능을 넣어주었다.
- 게시물에 좋아요를 누르면 그 정보가 유저에게 들어온다. 그리고 누를 때마다 아이콘이 달라져서 내가 좋아요를 했는지 안했는지 쉽게 구분이 가능하다.



### D. 영화 찜하기 & 이미 봤던 영화 표시하기 기능

- 앞으로 보고 싶은 영화 or 이미 봤지만 좋았던 영화에 찜하기(좋아요)를 할 수 있도록 만들어 주었다.
- 이미 봤던 영화를 표시할 수 있도록 이미 봤던 영화도 버튼을 눌러 표시하여 줄 수 있다.
- 추천 알고리즘에서 이미 봤던 영화는 제외시키도록 만들었다. (2개의 알고리즘만)



### E. 더보기

- 각종 영화 추천은 대표적인 4개만을 보여준다. 
- 더 많은 영화를 보고싶으면 오른쪽 위에 더보기 표시를 눌러주면 된다.
- 더보기를 누를 시 modal로 20개의 영화가 추천되어 나온다.



### F. 실시간 박스오피스

- 실시간으로 인기가 있는 영화들을 10위까지 크롤링하여 가져왔다.
- 1~10위까지 순서대로 나타나있으면 이 정보는 계속 업데이트되므로 새로운 영화가 올라와도 소식을 빠르게 알 수 있다.



### G. 하단의 footer바

- 저희는 남들과 다르게 하단의 footer바로 여러 페이지를 돌아다닐 수 있습니다.
- footer바는 홈, 탐색, 추천, 커뮤니티, 마이페이지로 구성되어 있으며, 추천과 마이페이지는 로그인을 했을 시에만 이용이 가능합니다.
- footer바에는 자신이 지금 페이지를 보고있는지 표시해줍니다.
- footer바는 사용자가 불편하지 않도록 스크롤이 밑으로 내려갈 때에 사라졌다가 다시 스크롤을 올리면 나타나도록 설계하였습니다.



### H. 영화 트레일러

- 영화의 예고편을 볼 수 있도록 트레일러를 api를 통하여 받아왔습니다.
- 이 api 정보는 모두 DB에 들어가 있어서 언제든 꺼내서 사용할 수 있도록 만들었습니다.
- 트레일러는 영화의 상세페이지에 들어가면 하단부에 나타나도록 만들었습니다.



### I. 아이디 찾기, 비밀번호 찾기

- 아이디 찾기는 회원의 이메일을 입력하고 그 이메일이 DB안의 user와 일치하였을 때, 이메일로 username을 전송하도록 만들었습니다. 
- 일치하지 않을 때에는 다시 입력해달라는 메시지가 뜹니다.
- 비밀번호 찾기는 회원의 이메일과 아이디(username)이 모두 일치할 때, 비밀번호를 재설정할 수 있는 페이지를 이메일을 통하여 전송하고 이 페이지를 통하여 비밀번호를 재설정하여 로그인할 수 있도록 만들었습니다.



### J. 회원가입시 동의서

- 개인정보에 대하여 동의하느냐는 동의서를 만들었습니다.



### K. 마이페이지

- 마이페이지에는 찜목록, 본영화, 리뷰, 게시글, 팔로우(팔로잉) 명수와 리스트 등을 볼 수 있도록 만들었습니다.



### L. 정렬하기

- 9가지의 정렬하기 기능을 구현하였다.
  - 개봉예정영화
  - 영화 평점 순 (오름차순, 내림차순)
  - 영화 평점 투표수 (내림차순)
  - 개봉일수 (오름차순, 내림차순)
  - 영화 런타임 (오름차순, 내림차순)
  - 가나다순



## 6. 느낀점

- 김민성

```
 이번 플젝은 시간이 부족해서 진짜 갈아넣는 느낌으로 프로젝트를 진행하였다. 저번 수요일부터 지금 금요일 오전 4시 15분.... 인나서 코딩하고 밥먹고 코딩하고 밥먹고 코딩하고 자고를 무한 반복하며 지냈다. 이번 관통프로젝트 마지막을 하면서 백(Django)에 대하여 진짜 많이 배운 시간이 되었다. api를 이용하여 데이터를 넣는 것부터 로직을 작성하고 프론트에 데이터를 보내주는 것까지 수도 없이 에러가 떴다. 그 과정 속에서 오류를 해결하고 새로 로직을 작성하고 하면서 어느 부분을 수정해야 되는지 감을 잡아가는 시간이 되었다. 그리고 프론트와 소통하면서 필요한 데이터를 넣어주고 에러가 난 부분을 수정하고 하면서 대화하면서 맞춰가는 방법을 알아간 것 같다. 
 이번 프로젝트를 하는데 연준이가 아니였다면, 이렇게까지 열심히 안했을 것 같다. 옆에서 열심히 하는 모습을 보니까 저도 모르고 더 열심히하게 되고, 새로운 기능들 어려운 기능들을 추가하고 싶어진 것 같다. 팀원을 제대로 만나서 더 많이 공부할 수 있었고, 더 열심히 할 수 있었다. 소통하는데 있어서도 서로 배려하면서 대화하여서 큰 문제 없이 프로젝트를 진행하고 마칠 수 있었다.
```

- 김연준

```
촉박한 시간 안에서 계획을 세우고 프로젝트를 완성하면서 계획의 중요성과 MVP의 중요성을 많이 느꼈습니다. 기획 단계에서 개발 구현 직전까지 설계를 충분히 진행하고 개발 동안에는 정말 구현을 위해서만 시간을 사용하는 것이 중요하다고 느꼈습니다.

front)
백이랑 프론트로 나뉘어 본격적으로 진행한 거의 첫 프로젝트라 많이 버겁고 생각보다 더 할일이 많았지만 그래도 힘든 만큼 vue에 대한 이해나 javascript에 대한 이해도가 짧은 시간 많이 올라갔다고 느낍니다.
```

